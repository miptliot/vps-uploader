!function(a){"use strict";var b=function(c,d){var e=function(b,c){return this.text=a("<span/>"),this.bar=a("<div/>").addClass("progress-bar").attr("role","progressbar").attr("aria-valuemin","0").attr("aria-valuemax","100").append(this.text),this.set(0),b.append(a("<div/>").addClass("progress").append(this.bar)),this};e.prototype.set=function(a){0>a&&(a=0),a>100&&(a=100),this.bar.attr("aria-valuenow",a).css("width",a+"%"),this.text.html(a+"%")},e.prototype.remove=function(){this.bar.remove(),this.text.remove()};var f=function(b,c){b.attr("id","vu-"+c.id),this.id=c.id,this.name=a("<span/>").addClass("vu-file-name").html(c.name),this.size=a("<span/>").addClass("vu-file-size").html(g(c.size));var d=a("<span/>").addClass("vu-file-remove").click(function(){h(c.id)}).html("&times;");this.info=a("<div/>").addClass("vu-file-info").append(d).append(this.name).append(this.size);var f=a("<div/>").addClass("vu-file-progress");return this.progress=new e(f),this.element=b.append(this.info).append(f),this};f.prototype.remove=function(){this.info.remove(),this.progress.remove(),this.element.remove()};var g=function(a,b){if(0==a)return"0 Byte";var c=1024,d=b+1||3,e=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],f=Math.floor(Math.log(a)/Math.log(c));return(a/Math.pow(c,f)).toPrecision(d)+" "+e[f]},h=function(a){for(var b=0;b<l.files.length;b++)if(l.files[b].uniqueIdentifier==a){l.removeFile(l.files[b]);break}for(var b=0;b<i.length;b++)i[b].id==a&&(i[b].remove(),i.splice(b,1))};this.options=a.extend(!0,{},b.defaults,d);var i=[],j=a("<input/>").attr("type","file"),k=a("<div/>").addClass("btn btn-default vu-file-select").html(d.messages.select).append(j);c.append(a("<div/>").addClass("vu-controls").append(k));var l=new Flow({target:d.target,uploadMethod:"POST",chunkSize:d.chunksize,simultaneousUploads:20,query:d.query});return l.on("filesAdded",function(b,d){for(var e=0;e<b.length;e++){var g=a("<div/>").addClass("vu-file-item");i.push(new f(g,{id:b[e].uniqueIdentifier,name:b[e].name,size:b[e].size})),c.append(g)}}),l.on("fileRemove",function(a){console.log(a)}),l.assignBrowse(j),this};b.prototype.defaults={extensions:null,messages:{change:"Change",remove:"Remove file",select:"Select files"}},a.fn.uploader=function(c){return this.each(function(){new b(a(this),c)})}}(jQuery);